@import './Themes.less';
/*
The styles referred to as 'baseline' in the comments below are critical because they ensure
a theme colors are more universally applied even by elements colored via inline styles. These are
particularly difficult to theme otherwise. We can build on top of, so to speak, these baseline
styles with only the things which need tweaking.

**IMPORTANT** Refrain from adding CSS classes from user generated content here to fix themeing issues.
These issues should be fixed by adding the "notheme" class to the elements that have an explicit
background color or should otherwise be excluded from themeing. More information about this can
be found here: https://phabricator.wikimedia.org/T236137
*/

/* baseline */

body {
  color: @color-base;
  background: @background-color-base;
}

.notheme {
  color: @color-base-fixed;
}

a.notheme {
  color: @color-progressive;
}

/* baseline anchor */
a {
  .nonDefaultThemes({
    color: @color-progressive;
  });
}

/* External link -- LTR */
.mw-parser-output a.external {
  background-image: var(--external-link-icon);
}

/* External link -- RTL */
body[dir='rtl'] .mw-parser-output a.external {
  background-image: var(--rtl-external-link-icon);
}

/* baseline mid background */
table,
td,
tr,
th,
li.gallerybox div.thumb {
  .nonDefaultThemes({
    background: @background-color-neutral-subtle !important;
    color: @color-base;
    border-color: @border-color-subtle;
  });
}

/* baseline div, span, ul, li */
div,
span,
ul,
ol,
li {
  .nonDefaultThemes({
    background-color: inherit;
    color: @color-base;
    border-color: @border-color-subtle;
  });
}

/* quotebox and blockquote */
/* en > Audioslave > 793042679 */
/* es > Arte > 100819823 */
blockquote,
div.quotebox {
  .nonDefaultThemes({
    background: @background-color-neutral-subtle;
  });
}

blockquote {
  overflow: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;

  ::-webkit-scrollbar {
    display: none;
  }
}

hr:not(.notheme) {
  border: none;
  height: 1px;
  background-color: @border-color-subtle;
}

/* figcaption color */
figcaption:not(.notheme) {
  color: @color-subtle;
}

/* caption background */
caption {
  .nonDefaultThemes({
    background: @background-color-neutral-subtle;
  });
}

/* images */
/* compatibility transform */
img.mwe-math-fallback-image-inline {
  .darkThemesOnlyUniversal({
    background: @background-color-interactive;
    padding: 2px;
  }, true);
}

/* en > Quadratic equation > 793685454 */
img.mwe-math-fallback-image-display,
img.mwe-math-fallback-image-inline {
  .darkThemesOnly({
    -webkit-filter: invert(100%);
    filter: invert(100%);
  });
}

.pcs-element-highlight {
  background-color: var(--color-text-highlight) !important;
  color: @color-emphasized !important;
  border-radius: 2px !important;
}

#pcs .dablink,
#pcs .hatnote,
#pcs .rellink {
    padding: 5px 0;
    color: @color-subtle;
    font-size: .875em;
    background-color: initial;
    margin-bottom: 1px;
    overflow: hidden;
    font-style: italic;
}

.mw-highlight {
  background-color: @background-color-neutral-subtle;
}

span.glossary-link-internal {
  .darkThemesOnly({
    color: @color-base !important;
  });
}

.pcs-collapse-table-container td {
  .darkThemesOnly({
    color: @color-base;
    background: unset;
  });
}

figcaption div span {
  .darkThemesOnly({
    color: @color-base;
    background: unset;
  });
}

span.org {
  color: #fff !important;
}

sup>a.reference-link {
  display: inherit;
}

.mw-parser-output {
  blockquote,
  dl dd {
    overflow: unset;
  }
}
